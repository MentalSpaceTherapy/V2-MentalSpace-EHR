// scripts.js

// Existing scripts ...

// Staff Form Submission
const staffForm = document.getElementById('staffForm');
if (staffForm) {
  staffForm.addEventListener('submit', async function (event) {
    event.preventDefault();

    const staffData = {
      first_name: document.getElementById('first_name').value,
      middle_name: document.getElementById('middle_name').value,
      last_name: document.getElementById('last_name').value,
      suffix: document.getElementById('suffix').value,
      type_of_clinician: document.getElementById('type_of_clinician').value,
      npi_number: document.getElementById('npi_number').value,
      supervisor_id: document.getElementById('supervisor_id').value || null,
      role: document.getElementById('role').value,
      email: document.getElementById('email').value,
      phone: document.getElementById('phone').value,
      can_receive_texts: document.getElementById('can_receive_texts').checked,
      work_phone: document.getElementById('work_phone').value,
      address: document.getElementById('address').value,
      city_state: document.getElementById('city_state').value,
      zip_code: document.getElementById('zip_code').value,
      license_state: document.getElementById('license_state').value,
      license_taxonomy: document.getElementById('license_taxonomy').value,
      license_expiration: document.getElementById('license_expiration').value
    };

    try {
      const response = await fetch('/api/staff', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(staffData)
      });

      if (!response.ok) {
        const errorData = await response.json();
        alert('Error creating staff: ' + (errorData.message || response.statusText));
        return;
      }

      const result = await response.json();
      alert('Staff created successfully! ID: ' + result.staff_id);

      // Optional: reset form
      staffForm.reset();
    } catch (error) {
      console.error('Error submitting staff form:', error);
      alert('An error occurred while creating the staff record.');
    }
  });
}
